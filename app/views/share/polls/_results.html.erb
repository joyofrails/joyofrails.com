<%= tag.div id: dom_id(poll, :results) do %>
  <% poll.questions.each do |question| %>
    <%= tag.div id: nested_dom_id(poll, question), class: "question flex flex-col gap-2" do %>
      <p><%= question.body %></p>
      <% question.answers.each do |answer| %>
        <%= tag.div id: nested_dom_id(question, answer), class: "answer flex justify-between items-center flex-row relative" do %>
          <div style="width: <%= number_to_percentage((answer.votes_count * 100) / question.votes_count, precision: 1) %>" class="absolute rounded border bar"></div>
          <div class="px-3 py-1 z-10">
            <%= answer.body %>
          </div>
          <div class="px-3 py-1 z-10">
            <%= number_to_percentage((answer.votes_count * 100) / question.votes_count, precision: 1) %>
          </div>
        <% end %>
      <% end %>
      <div class="p-2">
        <p><%= pluralize question.votes_count, "vote" %></p>
      </div>
    <% end %>
  <% end %>
<% end %>
